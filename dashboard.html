<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B"
    crossorigin="anonymous">

  <title>Ripe-palm Worldwide</title>
  <link rel="stylesheet" href="./dashborad-style.css">
  <style>
    .center {
      text-align: center
    }

    .box {

      width: 350px;
      height: 350px;
      margin: auto;
    }
  </style>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', { 'packages': ['line'] });
    google.charts.setOnLoadCallback(drawChart);
    let numPalm = 19
    let checkZ = 550

    function drawChart() {

      var data = new google.visualization.DataTable();
      data.addColumn('number', 'Day');
      data.addColumn('number', 'Ripe palm fruit');
      // data.addColumn('number', 'The Avengers');
      // data.addColumn('number', 'Transformers: Age of Extinction');


      data.addRows([
        [0, 0],
        [1, 23],
        [2, 20],
        [3, 26],
        [4, 28],
        [5, 30],
        [6, 19],
        [7, 27],
        [8, 17],
        [9, 16],
        [10, 20],
        [11, 22],
        [12, 30],
        [13, 25],
        [14, 19]
      ]);

      var options = {
        titleTextStyle: {
          // color: <>,  
          // fontName: <Times New Roman>, 
          fontSize: 40,
          bold: true
          // italic: <boolean>   
        },
        // subtitleTextStyle: {
        // // color: <>,  
        // // fontName: <Times New Roman>, 
        // fontSize: 30,    
        // bold: true    
        // // italic: <boolean>   
        // },

        chart: {

          title: 'Defoliation of ripe palm fruits',
          subtitle: 'Number of ripe palm fruits (Per Day)'
        },
        width: 1200,
        height: 650,
        series: {
          0: {
            lineDashStyle: [1, 1]


          },
        },

        colors: ['#e2431e', '#f1ca3a', '#6f9654', '#1c91c0',
          '#4374e0', '#5c3292', '#572a1a', '#999999', '#1a1a1a'],

        axes: {
          x: {
            4: { side: 'top' }
          }
        }
      };

      var chart = new google.charts.Line(document.getElementById('line_top_x'));
      chart.draw(data, google.charts.Line.convertOptions(options));

      setInterval(function () {
        $.ajax({
          type: "GET",
          url: "http://ecourse.cpe.ku.ac.th/exceed/api/palmpalmpalm-z_axis/view",
          dataType: "text",
          success: function (response) {
            console.log(response)

            if (checkZ < response) {
              data.removeRows(14, 1)

              numPalm += 1
              data.addRows([
                [14, numPalm]
              ]);

              chart.draw(data, google.charts.Line.convertOptions(options));
            }


          }
        });
      }, 2000)
    }
  </script>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div id="farm-name">
      <h3 id="name">Ripe-palm Worldwide</h3>
    </div>
    <div class="vl"></div>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active" style="margin-left: 20px;">
          <a class="nav-link" href="home.html">Home</a>
        </li>
        <li class="nav-item active" style="margin-left: 10px;">
          <a class="nav-link" href="index-graph.html">Dashboard</a>
        </li>
      </ul>
      <a href="index.html">
        <form class="form-inline my-2 my-lg-0">
          <img id="logout-button" src="https://image.ibb.co/gtqsWy/lockout.png" alt="Logout">
        </form>
      </a>
    </div>
  </nav>
  <div class="container">
    <div class="row">
      <div class="col-sm">

      </div>
      <div class="col-sm">
        <div id="line_top_x"></div>
      </div>
      <div class="col-sm">

      </div>
    </div>
  </div>






  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em"
    crossorigin="anonymous"></script>
</body>

</html>
